!function(e,o){e.shopme_woocommerce_mod=e.shopme_woocommerce_mod||{},e.shopme_core_helpers=e.shopme_core_helpers||{},e.shopme_core_helpers.owlInOwl=function(t){"undefined"==typeof t&&(t=this.$element);var a=e(".thumbs_carousel",t);a.length&&(a.owlCarousel({responsive:{0:{items:3},480:{items:3},992:{items:3}},margin:10,themeClass:"thumbnails_carousel",nav:!0,navText:[],rtl:o.ISRTL?!0:!1}),a.off("change.owl.carousel"))},e.shopme_woocommerce_mod.other_products=function(){if(e(".other_products").length){var t=e(".other_products"),a=e(".products",t),r=t.data("columns")||3,i="no_sidebar"==t.data("sidebar")?3:2;a.owlCarousel({responsive:{0:{items:1},487:{items:i},992:{items:r}},nav:!0,navText:[],rtl:o.ISRTL?!0:!1})}},e.shopme_woocommerce_mod.products_page_carousel=function(){if(e(".products_page_carousel").length){var t=e(".products_page_carousel");t.each(function(){var t=e(this),a=t.owlCarousel({items:1,autoHeight:!0,loop:!0,nav:!0,navText:[],themeClass:"single_visible_element",rtl:o.ISRTL?!0:!1,onInitialized:e.shopme_core_helpers.owlInOwl});a.off("change.owl.carousel")})}},e.shopme_woocommerce_mod.cart_dropdown=function(){({init:function(){var e=this;e.support={touch:Modernizr.touch,transitions:Modernizr.csstransitions},e.eventtype=e.support.touch?"touchstart":"click",e.listeners()},listeners:function(){var e=this;e.track_ajax_refresh_cart(e),e.track_ajax_adding_to_cart(),e.track_ajax_added_to_cart(e),e.scrollbar_cart(),e.eventQty()},track_ajax_refresh_cart:function(o){e.ajax({type:"POST",dataType:"json",url:shopme_global.ajaxurl,data:{action:"refresh_cart_fragment"},success:function(t){o.update_cart_fragment(t.fragments),e("body").trigger("wc_fragments_loaded")}}),e("body").on("wc_fragments_refreshed wc_fragments_loaded",function(t){o.ajax_remove_cart_item(o),e.shopme_dropdown_list.update("#header .dropdown-list",{speed:10})})},track_ajax_adding_to_cart:function(){e("body").on("adding_to_cart",function(e,o,t){e.preventDefault(),o.block({message:null,overlayCSS:{background:"#fff url("+shopme_global.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}})})},track_ajax_added_to_cart:function(o){e("body").on("added_to_cart",function(t,a,r,i){i.unblock().hide(),o.update_count_and_subtotal(a),o.update_cart_dropdown.call(o,t),e.shopme_dropdown_list.update("#header .dropdown-list",{speed:10})})},update_count_and_subtotal:function(o){e(".open_button").attr("data-amount",o.count).children("b.total_price").html(o.subtotal)},update_cart_dropdown:function(e){this.ajax_remove_cart_item(this)},update_cart_fragment:function(o){o&&e.each(o,function(o,t){e(o).replaceWith(t)})},ajax_remove_cart_item:function(o){e(".shopping_cart .remove-product").on(o.eventtype,function(t){t.preventDefault();var a=e(this),r=a.data("cart_id");a.data("product_id");e.ajax({type:"POST",dataType:"json",url:shopme_global.ajaxurl,data:{action:"cart_item_remove",_wpnonce:woocommerce_mod.nonce_cart_item_remove,cart_id:r},success:function(t){var r=t.fragments;r&&a.parent().animate({opacity:0},function(){var t=e(this),a=t.add(t.parent());a.slideUp(350,function(){t.remove(),o.update_count_and_subtotal(r),o.update_cart_fragment(r),e("body").trigger("wc_fragments_refreshed")})})}})})},scrollbar_cart:function(){e(".shopping_cart.dropdown").length&&e(".shopping_cart.dropdown").scrollbar()},eventQty:function(){e(document).on("click",".plus, .minus",function(){var o=e(this).closest(".qty").find(".input-text"),t=parseFloat(o.val()),a=parseFloat(o.attr("max")),r=parseFloat(o.attr("min")),i=o.attr("step");t&&""!==t&&"NaN"!==t||(t=0),(""===a||"NaN"===a)&&(a=""),(""===r||"NaN"===r)&&(r=0),("any"===i||""===i||void 0===i||"NaN"===parseFloat(i))&&(i=1),e(this).is(".plus")?a&&(a==t||t>a)?o.val(a):o.val(t+parseFloat(i)):r&&(r==t||r>t)?o.val(r):t>0&&o.val(t-parseFloat(i)),o.trigger("change")})}}).init()},e.shopme_woocommerce_mod.set_custom_scroll_bar=function(){var o=e(".custom-scrollbar");o.length&&o.is(":visible")&&o.scrollbar()},e.shopme_woocommerce_mod.raty=function(){e(".rating").length&&(e(".rating.readonly-rating").raty({readOnly:!0,path:shopme_global.paththeme+"/images/img",score:function(){return e(this).attr("data-score")}}),e(".rating.rate").raty({path:shopme_global.paththeme+"/images/img",score:function(){return e(this).attr("data-score")}}))},e.shopme_woocommerce_mod.zoom=function(){if(e(".single_product.images").length){if(e.shopme_woocommerce_mod.getGalleryList=function(){var o=[],t="product_preview";return e("."+t+" a").each(function(){var t="";e(this).data("zoom-image")?t=e(this).data("zoom-image"):e(this).data("image")&&(t=e(this).data("image")),t&&o.push({href:""+t,title:e(this).find("img").attr("title")})}),o},e(".image_preview_container").length){var o=e(".image_preview_container");o.each(function(){var o=e(this),t=o.data("id");e("#img_zoom",o).length&&e("#img_zoom",o).elevateZoom({zoomType:"inner",gallery:"thumbnails_"+t,galleryActiveClass:"active",cursor:"crosshair",responsive:!0,easing:!0,zoomWindowFadeIn:500,zoomWindowFadeOut:500,lensFadeIn:500,lensFadeOut:500})})}e(".open_qv").length&&e(".open_qv").on("click",function(o){o.preventDefault();var t,a=[];if(e("#img_zoom").length){var r=e(this),i=r.prev("img").data("elevateZoom");t=i.getGalleryList()}else t=e.shopme_woocommerce_mod.getGalleryList();if(e.each(t,function(e,o){var t={};t.src=o.href,t.type="image",a.push(t)}),0==a.length){var n={};n.src=e(this).attr("href"),n.type="image",a.push(n)}e.magnificPopup.open({items:a,type:"image",mainClass:"mfp-fade-in",removalDelay:300,closeBtnInside:!0,closeOnContentClick:!0,midClick:!0,fixedContentPos:!1,gallery:{tCounter:"%curr% / %total%",enabled:!0,preload:[1,1]},callbacks:{open:function(){var o=this;e.magnificPopup.instance.next=function(){o.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){e.magnificPopup.proto.next.call(o)},80)},e.magnificPopup.instance.prev=function(){o.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){e.magnificPopup.proto.prev.call(o)},80)}},imageLoadComplete:function(){var e=this;setTimeout(function(){e.wrap.addClass("mfp-image-loaded")},15)}}})})}},e.shopme_woocommerce_mod.specials_carousel=function(){var t=e(".widget-specials-carousel");t.length&&t.each(function(){var t=e(this),a=e("div.products",t),r=a.owlCarousel({responsive:{0:{items:1},480:{items:2},768:{items:1},992:{items:1}},autoHeight:!0,loop:!0,nav:!0,navText:[],themeClass:"single_visible_element",rtl:o.ISRTL?!0:!1});r.off("change.owl.carousel")})},e.shopme_woocommerce_mod.product_filter_styles=function(){var t=e(".products-container.view-grid").not(".widget-specials-carousel");t.length&&t.each(function(){var t=e(this),a=e("div.products",t),r=t.data("columns")||3,i="no_sidebar"==t.data("sidebar")?3:2;if(t.hasClass("owl_carousel"))a.on("initialized.owl.carousel resized.owl.carousel",e.shopme_core_helpers.sameheight).on("initialized.owl.carousel translated.owl.carousel",e.shopme_core_helpers.owlGetVisibleElements),a.owlCarousel({responsive:{0:{items:1},480:{items:i},992:{items:r}},nav:!0,navText:[],rtl:o.ISRTL?!0:!1,onInitialized:function(){var o=this,a=o.$element,r={},i=e(".product-filter",t);e.each(o._items,function(e,o){r[e]=o.children()}),i.on("click","li",function(o){var t=e(this),i=t.children().data("filter");o.preventDefault(),t.is(".active")||(a.addClass("changed").animate({opacity:0},200,function(){var o="";"*"==i?e.each(r,function(e,t){o+=t.parent().html()}):e.each(r,function(t,a){var r=e(a);r.hasClass(i)&&(o+=a.parent().html())}),""!=o.length&&a.on("initialized.owl.carousel resized.owl.carousel refresh.owl.carousel",e.shopme_core_helpers.sameheight).on("initialized.owl.carousel translated.owl.carousel refresh.owl.carousel",e.shopme_core_helpers.owlGetVisibleElements).trigger("replace.owl.carousel",o).trigger("refresh.owl.carousel").removeClass("changed").animate({opacity:1},200)}),t.closest("li").addClass("active").siblings().removeClass("active"))})}});else{var n=a,c={},s=e(".product-filter",t);e.each(n.children(),function(o,t){c[o]=e(t)}),s.on("click","li",function(){var o=e(this),t=o.children().data("filter");o.is(".active")||(n.addClass("changed").animate({opacity:0},200,function(){var o="";"*"==t?e.each(c,function(t,a){var r=e(a),i=r.wrap("<div></div>");o+=i.parent().html()}):e.each(c,function(a,r){var i=e(r);if(i.hasClass(t)){var n=i.wrap("<div></div>");o+=n.parent().html()}}),""!=o.length&&n.html(o).removeClass("changed").animate({opacity:1},200)}),o.closest("li").addClass("active").siblings().removeClass("active"))})}})},e.shopme_woocommerce_mod.tabbed=function(){if(e('[class*="tabs-holder"]').length){var o=e('[class*="tabs-holder"]');o.each(function(o,t){var a=e('[class*="tabs-nav"]',t),r=Modernizr.touch?"touchstart":"click";a.on(r,"a",function(o){o.preventDefault();var t=e(this).parent("li"),a=t.index();t.hasClass("active")&&o.preventDefault(),t.siblings().removeClass("active").end().addClass("active").parent().next().children('[class*="tab-content"]').stop(!0,!0).hide().eq(a).stop(!0,!0).fadeIn(800)})})}},e.shopme_woocommerce_mod.related_carousel=function(){if(e(".related_products").length){var t=e(".related_products"),a=e(".products",t),r=t.data("columns")||4,i="no_sidebar"==t.data("sidebar")?3:2;a.owlCarousel({responsive:{0:{items:1},480:{items:i},992:{items:r}},nav:!0,navText:[],rtl:o.ISRTL?!0:!1})}},e.shopme_woocommerce_mod.thumbs_carousel=function(){if(e(".product_preview .thumbs_carousel").length){var t=e(".product_preview .thumbs_carousel"),a=t.owlCarousel({responsive:{0:{items:2},480:{items:2},992:{items:3}},margin:10,themeClass:"thumbnails_carousel",nav:!0,navText:[],rtl:o.ISRTL?!0:!1});a.off("change.owl.carousel")}},e.changeView=function(o){this.options=e.extend({},e.changeView.DEFAULTS,o),this.init()},e.changeView.DEFAULTS={},e.changeView.prototype={init:function(){var o=this;o.body=e("body"),o.support={touch:Modernizr.touch},o.view=e(".list-or-grid"),o.view.eventtype=o.support.touch?"touchstart":"click",o.event()},event:function(){this.view.on(this.view.eventtype,"a",e.proxy(function(e){this.load(e)},this))},load:function(o){o.preventDefault();var t=e(o.currentTarget),a=t.data("view"),r=t.closest(".products-container");t.siblings().removeClass("active").end().addClass("active"),r.removeClass("view-grid list_view_products").addClass(a),e.cookie("mad_shop_view",a)}},e.shopme_woocommerce_mod.goto_review=function(){e(".woocommerce-review-link, .woocommerce-write-review-link").on("click",function(o){var t=e(this),a=t.attr("href"),r=e(this.hash);r.length&&("#reviews"==a||"#commentform"==a)&&(o.preventDefault(),e(".tabs_nav li.reviews_tab a").trigger("click"),setTimeout(function(){e("html, body").stop().animate({scrollTop:r.offset().top},600)},50))});var t=o.location.hash;("#commentform"==t||"#reviews"==t||-1!=t.indexOf("#comment-"))&&setTimeout(function(){var o=e(t);o.length&&(("#reviews"==t||"#commentform"==t)&&e(".tabs_nav li.reviews_tab a").trigger("click"),e("html, body").stop().animate({scrollTop:o.offset().top-e.shopme_core.stickyMenu.sticky_height-e.shopme_core.stickyMenu.adminbar_height-50},600))},200)},e.shopme_woocommerce_mod.product_preview=function(){var o=e(".product_preview[data-output]");o.length&&o.each(function(o,t){var a=e(t),r=e(a.data("output"));a.find("[data-image]:first").addClass("active"),a.on("click",".elzoom",function(o){o.preventDefault();var t=e(this);if(!t.hasClass("active")){t.parents(".thumbs_carousel").find("a").removeClass("active"),t.addClass("active");var a=e(this).data("image");r.length&&r.children("img").stop().animate({opacity:0},250,function(){e(this).attr("src",a).stop().animate({opacity:1})})}})})},e.shopme_woocommerce_mod.check_cart_variation=function(){return"undefined"==typeof wc_add_to_cart_variation_params?!1:(e(".variations_form").wc_variation_form(),void e(".variations_form .variations select").change())},e.shopme_woocommerce_mod.quick_view=function(){e(".quick-view").length&&new e.shopme_popup_prepare(".quick-view",{actionpopup:woocommerce_mod.action_quick_view,noncepopup:woocommerce_mod.nonce_quick_view_popup,on_load:function(){e.shopme_woocommerce_mod.check_cart_variation(),e.shopme_woocommerce_mod.thumbs_carousel(),e.shopme_woocommerce_mod.raty(),e.shopme_woocommerce_mod.product_preview(),e.shopme_woocommerce_mod.set_custom_scroll_bar()}})},e.shopme_woocommerce_mod.form_login=function(){e(".to-login").length&&new e.shopme_popup_prepare(".to-login",{actionpopup:woocommerce_mod.action_login,noncepopup:woocommerce_mod.nonce_login_popup,on_load:function(){var t=this,a=e(t.el).data().href;e("form.login").ajaxForm({url:a,success:function(){t.closeModal(),o.location.href=a}})}})},e(o).load(function(){e.shopme_core_helpers.owlInOwl(".single_product.images"),e.shopme_woocommerce_mod.product_filter_styles(),e.shopme_woocommerce_mod.products_page_carousel(),e.shopme_woocommerce_mod.related_carousel(),e.shopme_woocommerce_mod.other_products(),e.shopme_woocommerce_mod.specials_carousel()}),e(function(){e.shopme_woocommerce_mod.cart_dropdown(),e.shopme_woocommerce_mod.quick_view(),e.shopme_woocommerce_mod.form_login(),e.shopme_woocommerce_mod.zoom(),e.shopme_woocommerce_mod.raty(),e.shopme_woocommerce_mod.tabbed(),e(".list-or-grid").length&&new e.changeView,e.shopme_woocommerce_mod.product_preview(),e.shopme_woocommerce_mod.goto_review()})}(jQuery,window);